// Internationalization support for Arabic/English
export const translations = {
  en: {
    // Navigation
    dashboard: "Dashboard",
    products: "Products",
    sales: "Sales",
    expenses: "Expenses",
    workers: "Workers",
    activityLogs: "Activity Logs",
    reports: "Reports",
    settings: "Settings",
    
    // App Title
    appTitle: "Fertilizer Factory",
    appSubtitle: "Finance Manager",
    appDescription: "Built for mobile-first management",
    
    // Dashboard
    totalRevenue: "Total Revenue",
    totalExpenses: "Total Expenses",
    profit: "Profit",
    totalProducts: "Total Products",
    unitsSold: "Units Sold",
    salesOverview: "Sales Overview",
    topProducts: "Top Products",
    revenueDistribution: "Revenue distribution by product",
    thisMonth: "This Month",
    days7: "7 Days",
    days30: "30 Days",
    days90: "90 Days",
    year: "Year",
    
    // Products
    addProduct: "Add Product",
    productName: "Product Name",
    unitPrice: "Unit Price",
    stockQuantity: "Stock Quantity",
    productAdded: "Product Added",
    productUpdated: "Product Updated",
    editProduct: "Edit Product",
    
    // Sales
    recordSale: "Record Sale",
    totalSales: "Total Sales",
    quantity: "Quantity",
    totalAmount: "Total Amount",
    saleRecorded: "Sale Recorded",
    
    // Expenses
    addExpense: "Add Expense",
    expenseName: "Expense Name",
    amount: "Amount",
    category: "Category",
    expenseDate: "Expense Date",
    expenseAdded: "Expense Added",
    categories: "Categories",
    
    // Workers
    addWorker: "Add Worker",
    fullName: "Full Name",
    jobRole: "Job Role",
    department: "Department",
    monthlySalary: "Monthly Salary",
    hireDate: "Hire Date",
    email: "Email",
    phone: "Phone",
    status: "Status",
    active: "Active",
    inactive: "Inactive",
    terminated: "Terminated",
    totalWorkers: "Total Workers",
    activeWorkers: "Active Workers",
    totalSalaryExpense: "Total Salary Expense",
    departments: "Departments",
    workerAdded: "Worker Added",
    workerUpdated: "Worker Updated",
    editWorker: "Edit Worker",
    
    // Common
    cancel: "Cancel",
    save: "Save",
    edit: "Edit",
    delete: "Delete",
    add: "Add",
    update: "Update",
    loading: "Loading...",
    error: "Error",
    success: "Success",
    filters: "Filters",
    clearFilters: "Clear Filters",
    allCategories: "All categories",
    allProducts: "All products",
    allDepartments: "All departments",
    allStatuses: "All statuses",
    search: "Search...",
    profile: "Profile",
    logout: "Log out",
    optional: "Optional",
    required: "Required",
    perMonth: "per month",
    monthly: "monthly",
    
    // Form validations
    nameRequired: "Name is required",
    nameMinLength: "Name must be at least 2 characters",
    emailInvalid: "Invalid email",
    positiveNumber: "Must be a positive number",
    dateRequired: "Date is required",
    roleRequired: "Role is required",
    departmentRequired: "Department is required",
    
    // Departments
    production: "Production",
    qualityControl: "Quality Control",
    administration: "Administration",
    maintenance: "Maintenance",
    logistics: "Logistics",
    
    // Categories
    utilities: "Utilities",
    salaries: "Salaries",
    other: "Other",
    
    // Messages
    noDataFound: "No data found",
    noWorkersFound: "No workers found",
    noSalesFound: "No sales found",
    noExpensesFound: "No expenses found",
    addFirstWorker: "Add Your First Worker",
    recordFirstSale: "Record Your First Sale",
    
    // Notifications
    notifications: "Notifications",
    factoryManager: "Factory Manager",
    version: "Version 1.0.0",
    
    // Additional translations
    deleteConfirmation: "Are you sure you want to delete this product?",
    noProductsFound: "No products found",
    addFirstProduct: "Add your first product",
    manageInventory: "Manage your product inventory",
    inventoryValue: "Inventory Value",
    totalStock: "Total Stock",
    units: "units",
    searchProducts: "Search products",
    actions: "Actions",
    createdAt: "Created At",
    lastUpdated: "Last Updated",
    fromLastMonth: "from last month",
    margin: "margin",
    currentWorkers: "current workers",
    weeklyReport: "Weekly",
    monthlyReport: "Monthly", 
    yearlyReport: "Yearly",
    currentValue: "Current Value",
    change: "Change %",
    indicator: "Indicator",
    netProfit: "Net Profit",
    profitMargin: "Profit Margin",
    performanceSummary: "Performance Summary",
    overviewFinancial: "Overview of key financial indicators",
    monthlyTrend: "Monthly Trend for Revenue and Expenses",
    compareRevExp: "Compare revenue and expenses over the last six months",
    deptExpenses: "Department Expenses Distribution",
    expensesByDept: "Expense ratio for each department in the factory",
    productPerformance: "Product Performance",
    salesAndRevenue: "Sales and revenue of main products",
    recentTransactions: "Recent Transactions",
    
    // Months
    january: "January",
    february: "February", 
    march: "March",
    april: "April",
    may: "May",
    june: "June",
    
    // Products
    npkFertilizer: "NPK Fertilizer",
    ureaFertilizer: "Urea Fertilizer",
    organicCompost: "Organic Compost",
    phosphateFertilizer: "Phosphate Fertilizer"
  },
  
  ar: {
    // Navigation
    dashboard: "لوحة القيادة",
    products: "المنتجات",
    sales: "المبيعات",
    expenses: "المصروفات",
    workers: "العمال",
    activityLogs: "سجل الأنشطة",
    reports: "التقارير",
    settings: "الإعدادات",
    
    // App Title
    appTitle: "مصنع الأسمدة",
    appSubtitle: "مدير المالية",
    appDescription: "مصمم للإدارة المحمولة أولاً",
    
    // Dashboard
    totalRevenue: "إجمالي الإيرادات",
    totalExpenses: "إجمالي المصروفات",
    profit: "الربح",
    totalProducts: "إجمالي المنتجات",
    unitsSold: "الوحدات المباعة",
    salesOverview: "نظرة عامة على المبيعات",
    topProducts: "أفضل المنتجات",
    revenueDistribution: "توزيع الإيرادات حسب المنتج",
    thisMonth: "هذا الشهر",
    days7: "7 أيام",
    days30: "30 يوم",
    days90: "90 يوم",
    year: "سنة",
    
    // Products
    addProduct: "إضافة منتج",
    productName: "اسم المنتج",
    unitPrice: "سعر الوحدة",
    stockQuantity: "كمية المخزون",
    productAdded: "تم إضافة المنتج",
    productUpdated: "تم تحديث المنتج",
    editProduct: "تعديل المنتج",
    
    // Sales
    recordSale: "تسجيل مبيعة",
    totalSales: "إجمالي المبيعات",
    quantity: "الكمية",
    totalAmount: "المبلغ الإجمالي",
    saleRecorded: "تم تسجيل المبيعة",
    
    // Expenses
    addExpense: "إضافة مصروف",
    expenseName: "اسم المصروف",
    amount: "المبلغ",
    category: "الفئة",
    expenseDate: "تاريخ المصروف",
    expenseAdded: "تم إضافة المصروف",
    categories: "الفئات",
    
    // Workers
    addWorker: "إضافة عامل",
    fullName: "الاسم الكامل",
    jobRole: "المنصب الوظيفي",
    department: "القسم",
    monthlySalary: "الراتب الشهري",
    hireDate: "تاريخ التوظيف",
    email: "البريد الإلكتروني",
    phone: "الهاتف",
    status: "الحالة",
    active: "نشط",
    inactive: "غير نشط",
    terminated: "منتهي الخدمة",
    totalWorkers: "إجمالي العمال",
    activeWorkers: "العمال النشطون",
    totalSalaryExpense: "إجمالي مصروفات الرواتب",
    departments: "الأقسام",
    workerAdded: "تم إضافة العامل",
    workerUpdated: "تم تحديث بيانات العامل",
    editWorker: "تعديل بيانات العامل",
    
    // Common
    cancel: "إلغاء",
    save: "حفظ",
    edit: "تعديل",
    delete: "حذف",
    add: "إضافة",
    update: "تحديث",
    loading: "جاري التحميل...",
    error: "خطأ",
    success: "نجح",
    filters: "المرشحات",
    clearFilters: "مسح المرشحات",
    allCategories: "جميع الفئات",
    allProducts: "جميع المنتجات",
    allDepartments: "جميع الأقسام",
    allStatuses: "جميع الحالات",
    search: "بحث...",
    profile: "الملف الشخصي",
    logout: "تسجيل الخروج",
    optional: "اختياري",
    required: "مطلوب",
    perMonth: "في الشهر",
    monthly: "شهري",
    
    // Form validations
    nameRequired: "الاسم مطلوب",
    nameMinLength: "يجب أن يكون الاسم على الأقل حرفين",
    emailInvalid: "بريد إلكتروني غير صالح",
    positiveNumber: "يجب أن يكون رقم موجب",
    dateRequired: "التاريخ مطلوب",
    roleRequired: "المنصب مطلوب",
    departmentRequired: "القسم مطلوب",
    
    // Departments
    production: "الإنتاج",
    qualityControl: "مراقبة الجودة",
    administration: "الإدارة",
    maintenance: "الصيانة",
    logistics: "اللوجستيات",
    
    // Categories
    utilities: "المرافق",
    salaries: "الرواتب",
    other: "أخرى",
    
    // Messages
    noDataFound: "لا توجد بيانات",
    noWorkersFound: "لا يوجد عمال",
    noSalesFound: "لا توجد مبيعات",
    noExpensesFound: "لا توجد مصروفات",
    addFirstWorker: "أضف أول عامل",
    recordFirstSale: "سجل أول مبيعة",
    
    // Notifications
    notifications: "الإشعارات",
    factoryManager: "مدير المصنع",
    version: "الإصدار 1.0.0",
    
    // Additional translations
    deleteConfirmation: "هل أنت متأكد من حذف هذا المنتج؟",
    noProductsFound: "لا توجد منتجات",
    addFirstProduct: "أضف منتجك الأول",
    manageInventory: "إدارة مخزون المنتجات",
    inventoryValue: "قيمة المخزون",
    totalStock: "إجمالي المخزون",
    units: "وحدة",
    searchProducts: "البحث في المنتجات",
    actions: "الإجراءات",
    createdAt: "تاريخ الإنشاء",
    lastUpdated: "آخر تحديث",
    fromLastMonth: "من الشهر الماضي",
    margin: "هامش",
    currentWorkers: "عمال حاليين",
    weeklyReport: "أسبوعي",
    monthlyReport: "شهري", 
    yearlyReport: "سنوي",
    currentValue: "القيمة الحالية",
    change: "التغيير %",
    indicator: "المؤشر",
    netProfit: "صافي الربح",
    profitMargin: "هامش الربح",
    performanceSummary: "ملخص الأداء",
    overviewFinancial: "نظرة عامة على المؤشرات المالية الرئيسية",
    monthlyTrend: "الاتجاه الشهري للإيرادات والمصروفات",
    compareRevExp: "مقارنة الإيرادات والمصروفات خلال الأشهر الستة الماضية",
    deptExpenses: "توزيع مصروفات الأقسام",
    expensesByDept: "نسبة المصروفات لكل قسم في المصنع",
    productPerformance: "أداء المنتجات",
    salesAndRevenue: "مبيعات وإيرادات المنتجات الرئيسية",
    recentTransactions: "المعاملات الأخيرة",
    
    // Months
    january: "يناير",
    february: "فبراير", 
    march: "مارس",
    april: "أبريل",
    may: "مايو",
    june: "يونيو",
    
    // Products
    npkFertilizer: "سماد NPK",
    ureaFertilizer: "سماد اليوريا",
    organicCompost: "الكومبوست العضوي",
    phosphateFertilizer: "سماد الفوسفات"
  }
};

export type Language = keyof typeof translations;
export type TranslationKey = keyof typeof translations.en;

let currentLanguage: Language = 'ar'; // Default to Arabic
let languageChangeListeners: (() => void)[] = [];

export const setLanguage = (lang: Language) => {
  currentLanguage = lang;
  // Update document direction
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  document.documentElement.lang = lang;
  // Save to localStorage
  localStorage.setItem('language', lang);
  // Notify listeners
  languageChangeListeners.forEach(listener => listener());
};

export const getCurrentLanguage = (): Language => currentLanguage;

export const t = (key: TranslationKey): string => {
  return translations[currentLanguage][key] || translations.en[key] || key;
};

export const isRTL = (): boolean => currentLanguage === 'ar';

export const toggleLanguage = () => {
  setLanguage(currentLanguage === 'ar' ? 'en' : 'ar');
};

export const addLanguageChangeListener = (listener: () => void) => {
  languageChangeListeners.push(listener);
  return () => {
    languageChangeListeners = languageChangeListeners.filter(l => l !== listener);
  };
};

// Initialize with saved language or Arabic
const savedLanguage = localStorage.getItem('language') as Language;
if (savedLanguage && (savedLanguage === 'ar' || savedLanguage === 'en')) {
  setLanguage(savedLanguage);
} else {
  setLanguage('ar');
}